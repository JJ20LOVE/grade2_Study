# 介质访问控制

## **信道划分**

时分复用（TDM）：将时间分为等长的tdm帧，每个帧又分为m个时隙

统计时分复用（STDM）

频分复用（FDM）：将信号总频带分为几个子频带，还有隔离频带

波分复用（WDM）：光的频分复用

**码分复用（CDM）**

![image-20251229200342699](/Users/miaowu/Library/Application Support/typora-user-images/image-20251229200342699.png)

## 随机访问

纯ALOHA：如果准备好数据帧，就立即发送

时隙ALOHA

CSMA协议：先监听信道是否空闲，空闲才尝试发送

1-坚持CSMA协议

非坚持CSMA协议：信道不空闲会放弃监听信道

p-坚持CSMA协议：p概率立即把数据帧发送到信道上，1-p坚持监听

**CSMA/CD协议**：用于早期的有线以太网

![image-20251229205357315](/Users/miaowu/Library/Application Support/typora-user-images/image-20251229205357315.png)

**CSMA/CA协议**：用于无线网络（wifi）

![image-20251229220334029](/Users/miaowu/Library/Application Support/typora-user-images/image-20251229220334029.png)

![image-20251230102425582](/Users/miaowu/Library/Application Support/typora-user-images/image-20251230102425582.png)

## **轮询访问**

![image-20251230103609469](/Users/miaowu/Library/Application Support/typora-user-images/image-20251230103609469.png)

# 局域网

![image-20251230150934462](/Users/miaowu/Library/Application Support/typora-user-images/image-20251230150934462.png)

## 以太网与802.3

![image-20251231130445096](/Users/miaowu/Library/Application Support/typora-user-images/image-20251231130445096.png)

## VLAN虚拟局域网

![image-20251231131440665](/Users/miaowu/Library/Application Support/typora-user-images/image-20251231131440665.png)

## IEEE 802.11无线局域网

![image-20251231132545850](/Users/miaowu/Library/Application Support/typora-user-images/image-20251231132545850.png)

## PPP协议

链路层协议，仅支持点对点全双工链路

**链路控制协议**（LCP）：用于建立、配置LCP链路

**网络控制协议**（NCP）：为网络层协议建立和配置连接

以太网交换机的自学习功能 

直通交换：只检查帧目的mac地址

存储转发交换：先把帧完整的接受到交换机内部的高速缓存中

# 网络层

## 网络层的功能

**异构网络互联**  路由器也被称为网关

**路由与转发**

**拥塞控制**

## IPv4分组

一个数据链路层数据帧能承载的最大数据量称为最大传送单元（MTU）

MF=1，表示后面还有分片

MF=0，表示最后一个分片

DF=1，不允许被分片，=0允许

除最后一个分片外，其它每个分片的数据部分必须是8B的整数倍

TTL的初始值通常由源主机设置，每经过一个路由器，TTL-1，减到零时报错

![image-20251231150244527](/Users/miaowu/Library/Application Support/typora-user-images/image-20251231150244527.png)



## 最初的IP地址分类方案

单播地址

多播地址

32bitIP地址两级结构：网络号+主机号

## 子网划分与子网掩码

网络号+子网号+主机号

子网掩码：十七位1，十五位0，用子网掩码和IP地址逐位与，算出网络号+子网号（）网络前缀

## 无分类编址CIDR

CIDR地址块：32个的IP地址

定长子网划分：主机号全0和主机号全1不能分配给特定节点

变长子网划分

对于一个路由转发表，如果几条路由表项的转发接口相同，部分网络前缀也相同，那么可以把这几条路由表项聚合为一条

最长前缀匹配原则

## NAT技术

![image-20260102154307027](/Users/miaowu/Library/Application Support/typora-user-images/image-20260102154307027.png)

## ARP

在一个局域网内部，通过ARP可以查询到一个IP地址对应的MAC地址

集线器会转发所有，交换机会精准转发

![image-20260102155618759](/Users/miaowu/Library/Application Support/typora-user-images/image-20260102155618759.png)

目的mac地址未知时全0

## DHCP

![image-20260102161436868](/Users/miaowu/Library/Application Support/typora-user-images/image-20260102161436868.png)

## ICMP

让主机或路由器互相报告网络中发生的差错和异常情况

终点不可达

时间超过

改变路由

**IPv6**：总计128bit

## 路由算法

**静态路由算法**

**动态路由算法**

**距离**-**向量路由算法**：路由器要把自身的距离向量告诉我们

**链路状态路由算法**：Dijkstra算法

![image-20260102170057426](/Users/miaowu/Library/Application Support/typora-user-images/image-20260102170057426.png)



## 分层次的路由协议

![image-20260102185203417](/Users/miaowu/Library/Application Support/typora-user-images/image-20260102185203417.png)

## RIP

RIP使用跳数来衡量到达目的网络的距离

RIP认为好的路由就是跳数最少的

RIP路径距离不能超过15

基于距离向量运算

坏消息传的慢（慢收敛现象）

好消息传得快

## OSPF

基于链路状态路由算法

洪泛法更新链路信息

可以自己设置权值

![image-20260102201753082](/Users/miaowu/Library/Application Support/typora-user-images/image-20260102201753082.png)



![image-20260102202813772](/Users/miaowu/Library/Application Support/typora-user-images/image-20260102202813772.png)

分组类型：Hello,DD,LSR,LSU,LSAck

## BGP

外部网关协议

# 传输层

每台主机的端口号是相互独立的，TCP、UDP两种协议的端口号也是相互独立的

UDP不支持报文拆分重装

TCP支持报文的拆分重装

UDP无连接，不可靠，不支持拥塞控制，支持一对多传输

TCP有连接，可靠，支持拥塞控制，仅支持一对一传输

![image-20260102222901182](/Users/miaowu/Library/Application Support/typora-user-images/image-20260102222901182.png)







![image-20260106160210203](/Users/miaowu/Library/Application Support/typora-user-images/image-20260106160210203.png)

单选 10题20分

填空题 15分 每空一分

简答题 15分 四小题

计算题 6题 28分

综合分析题 9小题 10分 

TCP拥塞控制，CSMA/CD，子网划分，子网掩码，动态路由协议计算，窗口协议，CDMA码分多址，数据链路控制子层纠错码，检错码，CRC，香农，奈奎斯特，CSMA/CA避免冲突（？）



# 小知识点

存储转发交换机会先将完整的帧接受并存储，之后验证校验和，若检测到损坏则立即丢弃，直通式交换机只要知道帧的目的mac地址就转发

Reno支持快速重传/快速恢复（三次ACK后拥塞窗口不直接降为1，而是快速回复）

![image-20260107193126253](/Users/miaowu/Library/Application Support/typora-user-images/image-20260107193126253.png)





自适应树遍历协议不属于无冲突协议

![image-20260107194450057](/Users/miaowu/Library/Application Support/typora-user-images/image-20260107194450057.png)









**集线器在物理层，交换机在数据链路层，路由器在网络层**

